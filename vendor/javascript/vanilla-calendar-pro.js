// vanilla-calendar-pro@3.0.1 downloaded from https://ga.jspm.io/npm:vanilla-calendar-pro@3.0.1/index.mjs

var s=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,__defNormalProp=(c,d,u)=>d in c?s(c,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):c[d]=u,__spreadValues=(s,c)=>{for(var d in c||(c={}))m.call(c,d)&&__defNormalProp(s,d,c[d]);if(u)for(var d of u(c))v.call(c,d)&&__defNormalProp(s,d,c[d]);return s},__spreadProps=(s,u)=>c(s,d(u)),__publicField=(s,c,d)=>(__defNormalProp(s,"symbol"!=typeof c?c+"":c,d),d);const h={notFoundSelector:s=>`${s} is not found, check the first argument passed to new Calendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:"You specified an incorrect language label or did not specify the required number of values ​​for «locale.weekdays» or «locale.months».",incorrectTime:"The value of the time property can be: false, 12 or 24.",incorrectMonthsCount:"For the «multiple» calendar type, the «displayMonthsCount» parameter can have a value from 2 to 12, and for all others it cannot be greater than 1."},setContext=(s,c,d)=>{s.context[c]=d},destroy=s=>{var c,d,u,m,v;if(!s.context.isInit)throw new Error(h.notInit);s.inputMode?(null==(c=s.context.mainElement.parentElement)||c.removeChild(s.context.mainElement),null==(u=null==(d=s.context.inputElement)?void 0:d.replaceWith)||u.call(d,s.context.originalElement),setContext(s,"inputElement",void 0)):null==(v=(m=s.context.mainElement).replaceWith)||v.call(m,s.context.originalElement),setContext(s,"mainElement",s.context.originalElement),s.onDestroy&&s.onDestroy(s)},hide=s=>{s.context.currentType&&(s.context.mainElement.dataset.vcCalendarHidden="",s.onHide&&s.onHide(s))};function getOffset(s){if(!s||!s.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const c=s.getBoundingClientRect(),d=document.documentElement;return{bottom:c.bottom,right:c.right,top:c.top+window.scrollY-d.clientTop,left:c.left+window.scrollX-d.clientLeft}}function getViewportDimensions(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function getWindowScrollPosition(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function calculateAvailableSpace(s){const{top:c,left:d}=getWindowScrollPosition(),{top:u,left:m}=getOffset(s),{vh:v,vw:h}=getViewportDimensions(),p=u-c,y=m-d;return{top:p,bottom:v-(p+s.clientHeight),left:y,right:h-(y+s.clientWidth)}}function getAvailablePosition(s,c,d=5){const u={top:!0,bottom:!0,left:!0,right:!0},m=[];if(!c||!s)return{canShow:u,parentPositions:m};const{bottom:v,top:h}=calculateAvailableSpace(s),{top:p,left:y}=getOffset(s),{height:g,width:x}=c.getBoundingClientRect(),{vh:b,vw:M}=getViewportDimensions(),f=M/2,D=b/2;return[{condition:p<D,position:"top"},{condition:p>D,position:"bottom"},{condition:y<f,position:"left"},{condition:y>f,position:"right"}].forEach((({condition:s,position:c})=>{s&&m.push(c)})),Object.assign(u,{top:g<=h-d,bottom:g<=v-d,left:x<=y,right:x<=M-y}),{canShow:u,parentPositions:m}}const handleDay=(s,c,d,u)=>{var m;const v=u.querySelector(`[data-vc-date="${c}"]`),h=null==v?void 0:v.querySelector("[data-vc-date-btn]");if(!v||!h)return;if((null==d?void 0:d.modifier)&&h.classList.add(...d.modifier.trim().split(" ")),!(null==d?void 0:d.html))return;const p=document.createElement("div");p.className=s.styles.datePopup,p.dataset.vcDatePopup="",p.innerHTML=s.sanitizerHTML(d.html),h.ariaExpanded="true",h.ariaLabel=`${h.ariaLabel}, ${null==(m=null==p?void 0:p.textContent)?void 0:m.replace(/^\s+|\s+(?=\s)|\s+$/g,"").replace(/&nbsp;/g," ")}`,v.appendChild(p),requestAnimationFrame((()=>{if(!p)return;const{canShow:s}=getAvailablePosition(v,p),c=s.bottom?v.offsetHeight:-p.offsetHeight,d=s.left&&!s.right?v.offsetWidth-p.offsetWidth/2:!s.left&&s.right?p.offsetWidth/2:0;Object.assign(p.style,{left:`${d}px`,top:`${c}px`})}))},createDatePopup=(s,c)=>{var d;s.popups&&(null==(d=Object.entries(s.popups))||d.forEach((([d,u])=>handleDay(s,d,u,c))))},getDate=s=>new Date(`${s}T00:00:00`),getDateString=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,parseDates=s=>s.reduce(((s,c)=>{if(c instanceof Date||"number"==typeof c){const d=c instanceof Date?c:new Date(c);s.push(d.toISOString().substring(0,10))}else c.match(/^(\d{4}-\d{2}-\d{2})$/g)?s.push(c):c.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((c,d,u)=>{const m=getDate(d),v=getDate(u),h=new Date(m.getTime());for(;h<=v;h.setDate(h.getDate()+1))s.push(getDateString(h));return c}));return s}),[]),updateAttribute=(s,c,d,u="")=>{c?s.setAttribute(d,u):s.getAttribute(d)===u&&s.removeAttribute(d)},setDateModifier=(s,c,d,u,m,v,h)=>{var p,y,g,x;const b=getDate(s.context.displayDateMin)>getDate(v)||getDate(s.context.displayDateMax)<getDate(v)||(null==(p=s.context.disableDates)?void 0:p.includes(v))||!s.selectionMonthsMode&&"current"!==h||!s.selectionYearsMode&&getDate(v).getFullYear()!==c;updateAttribute(d,b,"data-vc-date-disabled"),u&&updateAttribute(u,b,"aria-disabled","true"),u&&updateAttribute(u,b,"tabindex","-1"),updateAttribute(d,!s.disableToday&&s.context.dateToday===v,"data-vc-date-today"),updateAttribute(d,!s.disableToday&&s.context.dateToday===v,"aria-current","date"),updateAttribute(d,null==(y=s.selectedWeekends)?void 0:y.includes(m),"data-vc-date-weekend");const M=(null==(g=s.selectedHolidays)?void 0:g[0])?parseDates(s.selectedHolidays):[];if(updateAttribute(d,M.includes(v),"data-vc-date-holiday"),(null==(x=s.context.selectedDates)?void 0:x.includes(v))?(d.setAttribute("data-vc-date-selected",""),u&&u.setAttribute("aria-selected","true"),s.context.selectedDates.length>1&&"multiple-ranged"===s.selectionDatesMode&&(s.context.selectedDates[0]===v&&d.setAttribute("data-vc-date-selected","first"),s.context.selectedDates[s.context.selectedDates.length-1]===v&&d.setAttribute("data-vc-date-selected","last"),s.context.selectedDates[0]!==v&&s.context.selectedDates[s.context.selectedDates.length-1]!==v&&d.setAttribute("data-vc-date-selected","middle"))):d.hasAttribute("data-vc-date-selected")&&(d.removeAttribute("data-vc-date-selected"),u&&u.removeAttribute("aria-selected")),!s.context.disableDates.includes(v)&&s.enableEdgeDatesOnly&&s.context.selectedDates.length>1&&"multiple-ranged"===s.selectionDatesMode){const c=getDate(s.context.selectedDates[0]),u=getDate(s.context.selectedDates[s.context.selectedDates.length-1]),m=getDate(v);updateAttribute(d,m>c&&m<u,"data-vc-date-selected","middle")}},getLocaleString=(s,c,d)=>new Date(`${s}T00:00:00.000Z`).toLocaleString(c,d),getWeekNumber=(s,c)=>{const d=getDate(s),u=(d.getDay()-c+7)%7;d.setDate(d.getDate()+4-u);const m=new Date(d.getFullYear(),0,1),v=Math.ceil(((+d-+m)/864e5+1)/7);return{year:d.getFullYear(),week:v}},addWeekNumberForDate=(s,c,d)=>{const u=getWeekNumber(d,s.firstWeekday);u&&(c.dataset.vcDateWeekNumber=String(u.week))},setDaysAsDisabled=(s,c,d)=>{var u,m,v,h,p;const y=null==(u=s.disableWeekdays)?void 0:u.includes(d),g=s.disableAllDates&&!!(null==(m=s.context.enableDates)?void 0:m[0]);!y&&!g||(null==(v=s.context.enableDates)?void 0:v.includes(c))||(null==(h=s.context.disableDates)?void 0:h.includes(c))||(s.context.disableDates.push(c),null==(p=s.context.disableDates)||p.sort(((s,c)=>+new Date(s)-+new Date(c))))},createDate=(s,c,d,u,m,v)=>{const h=getDate(m).getDay(),p="string"==typeof s.locale&&s.locale.length?s.locale:"en",y=document.createElement("div");let g;y.className=s.styles.date,y.dataset.vcDate=m,y.dataset.vcDateMonth=v,y.dataset.vcDateWeekDay=String(h),("current"===v||s.displayDatesOutside)&&(g=document.createElement("button"),g.className=s.styles.dateBtn,g.type="button",g.role="gridcell",g.ariaLabel=getLocaleString(m,p,{dateStyle:"long",timeZone:"UTC"}),g.dataset.vcDateBtn="",g.innerText=String(u),y.appendChild(g)),s.enableWeekNumbers&&addWeekNumberForDate(s,y,m),setDaysAsDisabled(s,m,h),setDateModifier(s,c,y,g,h,m,v),d.appendChild(y),s.onCreateDateEls&&s.onCreateDateEls(s,y)},createDatesFromCurrentMonth=(s,c,d,u,m)=>{for(let v=1;v<=d;v++){const d=new Date(u,m,v);createDate(s,u,c,v,getDateString(d),"current")}},createDatesFromNextMonth=(s,c,d,u,m,v)=>{const h=v+d,p=7*Math.ceil(h/7)-h,y=m+1===12?u+1:u,g=m+1===12?"01":m+2<10?`0${m+2}`:m+2;for(let d=1;d<=p;d++){const m=d<10?`0${d}`:String(d);createDate(s,u,c,d,`${y}-${g}-${m}`,"next")}},createDatesFromPrevMonth=(s,c,d,u,m)=>{let v=new Date(d,u,0).getDate()-(m-1);const h=0===u?d-1:d,p=0===u?12:u<10?`0${u}`:u;for(let u=m;u>0;u--,v++)createDate(s,d,c,v,`${h}-${p}-${v}`,"prev")},createWeekNumbers=(s,c,d,u,m)=>{if(!s.enableWeekNumbers)return;u.textContent="";const v=document.createElement("b");v.className=s.styles.weekNumbersTitle,v.innerText="#",v.dataset.vcWeekNumbers="title",u.appendChild(v);const h=document.createElement("div");h.className=s.styles.weekNumbersContent,h.dataset.vcWeekNumbers="content",u.appendChild(h);const p=document.createElement("button");p.type="button",p.className=s.styles.weekNumber;const y=m.querySelectorAll("[data-vc-date]"),g=Math.ceil((c+d)/7);for(let c=0;c<g;c++){const d=y[0===c?6:7*c].dataset.vcDate,u=getWeekNumber(d,s.firstWeekday);if(!u)return;const m=p.cloneNode(!0);m.innerText=String(u.week),m.dataset.vcWeekNumber=String(u.week),m.dataset.vcWeekYear=String(u.year),m.role="rowheader",m.ariaLabel=`${u.week}`,h.appendChild(m)}},createDates=s=>{const c=new Date(s.context.selectedYear,s.context.selectedMonth,1),d=s.context.mainElement.querySelectorAll('[data-vc="dates"]'),u=s.context.mainElement.querySelectorAll('[data-vc-week="numbers"]');d.forEach(((d,m)=>{s.selectionDatesMode||(d.dataset.vcDatesDisabled=""),d.textContent="";const v=new Date(c);v.setMonth(v.getMonth()+m);const h=v.getMonth(),p=v.getFullYear(),y=(new Date(p,h,1).getDay()-s.firstWeekday+7)%7,g=new Date(p,h+1,0).getDate();createDatesFromPrevMonth(s,d,p,h,y),createDatesFromCurrentMonth(s,d,g,p,h),createDatesFromNextMonth(s,d,g,p,h,y),createDatePopup(s,d),createWeekNumbers(s,y,g,u[m],d)}))},layoutDefault=s=>`\n  <div class="${s.styles.header}" data-vc="header" role="toolbar" aria-label="${s.labels.navigation}">\n    <#ArrowPrev [month] />\n    <div class="${s.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [month] />\n  </div>\n  <div class="${s.styles.wrapper}" data-vc="wrapper">\n    <#WeekNumbers />\n    <div class="${s.styles.content}" data-vc="content">\n      <#Week />\n      <#Dates />\n      <#DateRangeTooltip />\n    </div>\n  </div>\n  <#ControlTime />\n`,layoutMonths=s=>`\n  <div class="${s.styles.header}" data-vc="header" role="toolbar" aria-label="${s.labels.navigation}">\n    <div class="${s.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n  </div>\n  <div class="${s.styles.wrapper}" data-vc="wrapper">\n    <div class="${s.styles.content}" data-vc="content">\n      <#Months />\n    </div>\n  </div>\n`,layoutMultiple=s=>`\n  <div class="${s.styles.controls}" data-vc="controls" role="toolbar" aria-label="${s.labels.navigation}">\n    <#ArrowPrev [month] />\n    <#ArrowNext [month] />\n  </div>\n  <div class="${s.styles.grid}" data-vc="grid">\n    <#Multiple>\n      <div class="${s.styles.column}" data-vc="column" role="region">\n        <div class="${s.styles.header}" data-vc="header">\n          <div class="${s.styles.headerContent}" data-vc-header="content">\n            <#Month />\n            <#Year />\n          </div>\n        </div>\n        <div class="${s.styles.wrapper}" data-vc="wrapper">\n          <#WeekNumbers />\n          <div class="${s.styles.content}" data-vc="content">\n            <#Week />\n            <#Dates />\n          </div>\n        </div>\n      </div>\n    <#/Multiple>\n    <#DateRangeTooltip />\n  </div>\n  <#ControlTime />\n`,layoutYears=s=>`\n  <div class="${s.styles.header}" data-vc="header" role="toolbar" aria-label="${s.labels.navigation}">\n    <#ArrowPrev [year] />\n    <div class="${s.styles.headerContent}" data-vc-header="content">\n      <#Month />\n      <#Year />\n    </div>\n    <#ArrowNext [year] />\n  </div>\n  <div class="${s.styles.wrapper}" data-vc="wrapper">\n    <div class="${s.styles.content}" data-vc="content">\n      <#Years />\n    </div>\n  </div>\n`,ArrowNext=(s,c)=>`<button type="button" class="${s.styles.arrowNext}" data-vc-arrow="next" aria-label="${s.labels.arrowNext[c]}"></button>`,ArrowPrev=(s,c)=>`<button type="button" class="${s.styles.arrowPrev}" data-vc-arrow="prev" aria-label="${s.labels.arrowPrev[c]}"></button>`,ControlTime=s=>s.selectionTimeMode?`<div class="${s.styles.time}" data-vc="time" role="group" aria-label="${s.labels.selectingTime}"></div>`:"",DateRangeTooltip=s=>s.onCreateDateRangeTooltip?`<div class="${s.styles.dateRangeTooltip}" data-vc-date-range-tooltip="hidden"></div>`:"",Dates=s=>`<div class="${s.styles.dates}" data-vc="dates" role="grid" aria-live="assertive" aria-label="${s.labels.dates}" ${"multiple"===s.type?"aria-multiselectable":""}></div>`,Month=s=>`<button type="button" class="${s.styles.month}" data-vc="month"></button>`,Months=s=>`<div class="${s.styles.months}" data-vc="months" role="grid" aria-live="assertive" aria-label="${s.labels.months}"></div>`,Week=s=>`<div class="${s.styles.week}" data-vc="week" role="row" aria-label="${s.labels.week}"></div>`,WeekNumbers=s=>s.enableWeekNumbers?`<div class="${s.styles.weekNumbers}" data-vc-week="numbers" role="row" aria-label="${s.labels.weekNumber}"></div>`:"",Year=s=>`<button type="button" class="${s.styles.year}" data-vc="year"></button>`,Years=s=>`<div class="${s.styles.years}" data-vc="years" role="grid" aria-live="assertive" aria-label="${s.labels.years}"></div>`,p={ArrowNext:ArrowNext,ArrowPrev:ArrowPrev,ControlTime:ControlTime,Dates:Dates,DateRangeTooltip:DateRangeTooltip,Month:Month,Months:Months,Week:Week,WeekNumbers:WeekNumbers,Year:Year,Years:Years},getComponent=s=>p[s],parseLayout=(s,c)=>c.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((c,d)=>{const u=(d.match(/\[(.*?)\]/)||[])[1],m=d.replace(/[/\s\n\t]|\[(.*?)\]/g,""),v=getComponent(m),h=v?v(s,null!=u?u:null):"";return s.sanitizerHTML(h)})).replace(/[\n\t]/g,""),parseMultipleLayout=(s,c)=>c.replace(new RegExp("<#Multiple>(.*?)<#\\/Multiple>","gs"),((c,d)=>{const u=Array(s.context.displayMonthsCount).fill(d).join("");return s.sanitizerHTML(u)})).replace(/[\n\t]/g,""),createLayouts=(s,c)=>{const d={default:layoutDefault,month:layoutMonths,year:layoutYears,multiple:layoutMultiple};if(Object.keys(d).forEach((c=>{const u=c;s.layouts[u].length||(s.layouts[u]=d[u](s))})),s.context.mainElement.className=s.styles.calendar,s.context.mainElement.dataset.vc="calendar",s.context.mainElement.dataset.vcType=s.context.currentType,s.context.mainElement.role="application",s.context.mainElement.tabIndex=0,s.context.mainElement.ariaLabel=s.labels.application,"multiple"!==s.context.currentType){if("multiple"===s.type&&c){const d=s.context.mainElement.querySelector('[data-vc="controls"]'),u=s.context.mainElement.querySelector('[data-vc="grid"]'),m=c.closest('[data-vc="column"]');return d&&s.context.mainElement.removeChild(d),u&&(u.dataset.vcGrid="hidden"),m&&(m.dataset.vcColumn=s.context.currentType),void(m&&(m.innerHTML=s.sanitizerHTML(parseLayout(s,s.layouts[s.context.currentType]))))}s.context.mainElement.innerHTML=s.sanitizerHTML(parseLayout(s,s.layouts[s.context.currentType]))}else s.context.mainElement.innerHTML=s.sanitizerHTML(parseMultipleLayout(s,parseLayout(s,s.layouts[s.context.currentType])))},setVisibilityArrows=(s,c,d,u)=>{s.style.visibility=d?"hidden":"",c.style.visibility=u?"hidden":""},handleDefaultType=(s,c,d)=>{const u=getDate(getDateString(new Date(s.context.selectedYear,s.context.selectedMonth,1))),m=new Date(u.getTime()),v=new Date(u.getTime());m.setMonth(m.getMonth()-s.monthsToSwitch),v.setMonth(v.getMonth()+s.monthsToSwitch);const h=getDate(s.context.dateMin),p=getDate(s.context.dateMax);s.selectionYearsMode||(h.setFullYear(u.getFullYear()),p.setFullYear(u.getFullYear()));const y=!s.selectionMonthsMode||m.getFullYear()<h.getFullYear()||m.getFullYear()===h.getFullYear()&&m.getMonth()<h.getMonth(),g=!s.selectionMonthsMode||v.getFullYear()>p.getFullYear()||v.getFullYear()===p.getFullYear()&&v.getMonth()>p.getMonth();setVisibilityArrows(c,d,y,g)},handleYearType=(s,c,d)=>{const u=getDate(s.context.dateMin),m=getDate(s.context.dateMax),v=!!(u.getFullYear()&&s.context.displayYear-7<=u.getFullYear()),h=!!(m.getFullYear()&&s.context.displayYear+7>=m.getFullYear());setVisibilityArrows(c,d,v,h)},visibilityArrows=s=>{if("month"===s.context.currentType)return;const c=s.context.mainElement.querySelector('[data-vc-arrow="prev"]'),d=s.context.mainElement.querySelector('[data-vc-arrow="next"]');c&&d&&{default:()=>handleDefaultType(s,c,d),year:()=>handleYearType(s,c,d)}["multiple"===s.context.currentType?"default":s.context.currentType]()},visibilityHandler=(s,c,d,u,m)=>{const v=new Date(u.setFullYear(s.context.selectedYear,s.context.selectedMonth+d)).getFullYear(),h=new Date(u.setMonth(s.context.selectedMonth+d)).getMonth(),p=s.context.locale.months.long[h],y=c.closest('[data-vc="column"]');y&&(y.ariaLabel=`${p} ${v}`);const g={month:{id:h,label:p},year:{id:v,label:v}};c.innerText=String(g[m].label),c.dataset[`vc${m.charAt(0).toUpperCase()+m.slice(1)}`]=String(g[m].id),c.ariaLabel=`${s.labels[m]} ${g[m].label}`;const x={month:s.selectionMonthsMode,year:s.selectionYearsMode},b=!1===x[m]||"only-arrows"===x[m];b&&(c.tabIndex=-1),c.disabled=b},visibilityTitle=s=>{const c=s.context.mainElement.querySelectorAll('[data-vc="month"]'),d=s.context.mainElement.querySelectorAll('[data-vc="year"]'),u=new Date(s.context.selectedYear,s.context.selectedMonth,1);[c,d].forEach((c=>null==c?void 0:c.forEach(((c,d)=>visibilityHandler(s,c,d,u,c.dataset.vc)))))},setYearModifier=(s,c,d,u,m)=>{var v;const h={month:"[data-vc-months-month]",year:"[data-vc-years-year]"},p={month:{selected:"data-vc-months-month-selected",aria:"aria-selected",value:"vcMonthsMonth",selectedProperty:"selectedMonth"},year:{selected:"data-vc-years-year-selected",aria:"aria-selected",value:"vcYearsYear",selectedProperty:"selectedYear"}};m&&(null==(v=s.context.mainElement.querySelectorAll(h[d]))||v.forEach((s=>{s.removeAttribute(p[d].selected),s.removeAttribute(p[d].aria)})),setContext(s,p[d].selectedProperty,Number(c.dataset[p[d].value])),visibilityTitle(s),"year"===d&&visibilityArrows(s)),u&&(c.setAttribute(p[d].selected,""),c.setAttribute(p[d].aria,"true"))},relationshipID=s=>{if("multiple"!==s.type)return 0;const c=s.context.mainElement.querySelectorAll('[data-vc="column"]'),d=Array.from(c).findIndex((s=>s.closest('[data-vc-column="month"]')));return d>0?d:0},createMonthEl=(s,c,d,u,m,v,h)=>{const p=c.cloneNode(!1);return p.className=s.styles.monthsMonth,p.innerText=u,p.ariaLabel=m,p.role="gridcell",p.dataset.vcMonthsMonth=`${h}`,v&&(p.ariaDisabled="true"),v&&(p.tabIndex=-1),p.disabled=v,setYearModifier(s,p,"month",d===h,!1),p},createMonths=(s,c)=>{var d,u;const m=null==(d=null==c?void 0:c.closest('[data-vc="header"]'))?void 0:d.querySelector('[data-vc="year"]'),v=m?Number(m.dataset.vcYear):s.context.selectedYear,h=(null==c?void 0:c.dataset.vcMonth)?Number(c.dataset.vcMonth):s.context.selectedMonth;setContext(s,"currentType","month"),createLayouts(s,c),visibilityTitle(s);const p=s.context.mainElement.querySelector('[data-vc="months"]');if(!s.selectionMonthsMode||!p)return;const y=s.monthsToSwitch>1?s.context.locale.months.long.map(((c,d)=>h-s.monthsToSwitch*d)).concat(s.context.locale.months.long.map(((c,d)=>h+s.monthsToSwitch*d))).filter((s=>s>=0&&s<=12)):Array.from(Array(12).keys()),g=document.createElement("button");g.type="button";for(let c=0;c<12;c++){const d=getDate(s.context.dateMin),u=getDate(s.context.dateMax),m=c<d.getMonth()+relationshipID(s)&&v<=d.getFullYear()||c>u.getMonth()+relationshipID(s)&&v>=u.getFullYear()||c!==h&&!y.includes(c),x=createMonthEl(s,g,h,s.context.locale.months.short[c],s.context.locale.months.long[c],m,c);p.appendChild(x),s.onCreateMonthEls&&s.onCreateMonthEls(s,x)}null==(u=s.context.mainElement.querySelector("[data-vc-months-month]"))||u.focus()},TimeInput=(s,c,d,u,m)=>`\n  <label class="${c}" data-vc-time-input="${s}">\n    <input type="text" name="${s}" maxlength="2" aria-label="${d[`input${s.charAt(0).toUpperCase()+s.slice(1)}`]}" value="${u}" ${m?"disabled":""}>\n  </label>\n`,TimeRange=(s,c,d,u,m,v,h)=>`\n  <label class="${c}" data-vc-time-range="${s}">\n    <input type="range" name="${s}" min="${u}" max="${m}" step="${v}" aria-label="${d[`range${s.charAt(0).toUpperCase()+s.slice(1)}`]}" value="${h}">\n  </label>\n`,handleActions=(s,c,d,u)=>{({hour:()=>setContext(s,"selectedHours",d),minute:()=>setContext(s,"selectedMinutes",d)})[u](),setContext(s,"selectedTime",`${s.context.selectedHours}:${s.context.selectedMinutes}${s.context.selectedKeeping?` ${s.context.selectedKeeping}`:""}`),s.onChangeTime&&s.onChangeTime(s,c,!1),s.inputMode&&s.context.inputElement&&s.context.mainElement&&s.onChangeToInput&&s.onChangeToInput(s,c)},transformTime24=(s,c)=>{var d;return(null==(d={0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"00",PM:"12"}}[Number(s)])?void 0:d[c])||String(s)},handleClickKeepingTime=(s,c,d,u,m)=>{const o=v=>{const h="AM"===s.context.selectedKeeping?"PM":"AM",p=transformTime24(s.context.selectedHours,h);Number(p)<=u&&Number(p)>=m?(setContext(s,"selectedKeeping",h),d.value=p,handleActions(s,v,s.context.selectedHours,"hour"),c.ariaLabel=`${s.labels.btnKeeping} ${s.context.selectedKeeping}`,c.innerText=s.context.selectedKeeping):s.onChangeTime&&s.onChangeTime(s,v,!0)};return c.addEventListener("click",o),()=>{c.removeEventListener("click",o)}},transformTime12=s=>({0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(s)]||String(s)),updateInputAndRange=(s,c,d,u)=>{s.value=d,c.value=u},updateKeepingTime$1=(s,c,d)=>{c&&d&&(setContext(s,"selectedKeeping",d),c.innerText=d)},handleInput$1=(s,c,d,u,m,v,h)=>{const p={hour:(p,y,g)=>{s.selectionTimeMode&&{12:()=>{if(!s.context.selectedKeeping)return;const x=Number(transformTime24(y,s.context.selectedKeeping));if(!(x<=v&&x>=h))return updateInputAndRange(d,c,s.context.selectedHours,s.context.selectedHours),void(s.onChangeTime&&s.onChangeTime(s,g,!0));updateInputAndRange(d,c,transformTime12(y),transformTime24(y,s.context.selectedKeeping)),p>12&&updateKeepingTime$1(s,u,"PM"),handleActions(s,g,transformTime12(y),m)},24:()=>{if(!(p<=v&&p>=h))return updateInputAndRange(d,c,s.context.selectedHours,s.context.selectedHours),void(s.onChangeTime&&s.onChangeTime(s,g,!0));updateInputAndRange(d,c,y,y),handleActions(s,g,y,m)}}[s.selectionTimeMode]()},minute:(u,p,y)=>{if(!(u<=v&&u>=h))return d.value=s.context.selectedMinutes,void(s.onChangeTime&&s.onChangeTime(s,y,!0));d.value=p,c.value=p,handleActions(s,y,p,m)}},r=s=>{const c=Number(d.value),u=d.value.padStart(2,"0");p[m]&&p[m](c,u,s)};return d.addEventListener("change",r),()=>{d.removeEventListener("change",r)}},updateInputAndTime=(s,c,d,u,m)=>{c.value=m,handleActions(s,d,m,u)},updateKeepingTime=(s,c,d)=>{c&&(setContext(s,"selectedKeeping",d),c.innerText=d)},handleRange=(s,c,d,u,m)=>{const o=v=>{const h=Number(c.value),p=c.value.padStart(2,"0"),y="hour"===m,g=24===s.selectionTimeMode,x=h>0&&h<12;y&&!g&&updateKeepingTime(s,u,0===h||x?"AM":"PM"),updateInputAndTime(s,d,v,m,!y||g||x?p:transformTime12(c.value))};return c.addEventListener("input",o),()=>{c.removeEventListener("input",o)}},handleMouseOver=s=>s.setAttribute("data-vc-input-focus",""),handleMouseOut=s=>s.removeAttribute("data-vc-input-focus"),handleTime=(s,c)=>{const d=c.querySelector('[data-vc-time-range="hour"] input[name="hour"]'),u=c.querySelector('[data-vc-time-range="minute"] input[name="minute"]'),m=c.querySelector('[data-vc-time-input="hour"] input[name="hour"]'),v=c.querySelector('[data-vc-time-input="minute"] input[name="minute"]'),h=c.querySelector('[data-vc-time="keeping"]');if(!(d&&u&&m&&v))return;const i=s=>{s.target===d&&handleMouseOver(m),s.target===u&&handleMouseOver(v)},r=s=>{s.target===d&&handleMouseOut(m),s.target===u&&handleMouseOut(v)};return c.addEventListener("mouseover",i),c.addEventListener("mouseout",r),handleInput$1(s,d,m,h,"hour",s.timeMaxHour,s.timeMinHour),handleInput$1(s,u,v,h,"minute",s.timeMaxMinute,s.timeMinMinute),handleRange(s,d,m,h,"hour"),handleRange(s,u,v,h,"minute"),h&&handleClickKeepingTime(s,h,d,s.timeMaxHour,s.timeMinHour),()=>{c.removeEventListener("mouseover",i),c.removeEventListener("mouseout",r)}},createTime=s=>{const c=s.context.mainElement.querySelector('[data-vc="time"]');if(!s.selectionTimeMode||!c)return;const[d,u]=[s.timeMinHour,s.timeMaxHour],[m,v]=[s.timeMinMinute,s.timeMaxMinute],h=s.context.selectedKeeping?transformTime24(s.context.selectedHours,s.context.selectedKeeping):s.context.selectedHours,p="range"===s.timeControls;var y;c.innerHTML=s.sanitizerHTML(`\n    <div class="${s.styles.timeContent}" data-vc-time="content">\n      ${TimeInput("hour",s.styles.timeHour,s.labels,s.context.selectedHours,p)}\n      ${TimeInput("minute",s.styles.timeMinute,s.labels,s.context.selectedMinutes,p)}\n      ${12===s.selectionTimeMode?(y=s.context.selectedKeeping,`<button type="button" class="${s.styles.timeKeeping}" aria-label="${s.labels.btnKeeping} ${y}" data-vc-time="keeping" ${p?"disabled":""}>${y}</button>`):""}\n    </div>\n    <div class="${s.styles.timeRanges}" data-vc-time="ranges">\n      ${TimeRange("hour",s.styles.timeRange,s.labels,d,u,s.timeStepHour,h)}\n      ${TimeRange("minute",s.styles.timeRange,s.labels,m,v,s.timeStepMinute,s.context.selectedMinutes)}\n    </div>\n  `),handleTime(s,c)},createWeek=s=>{const c=s.selectedWeekends?[...s.selectedWeekends]:[],d=[...s.context.locale.weekdays.long].reduce(((d,u,m)=>[...d,{id:m,titleShort:s.context.locale.weekdays.short[m],titleLong:u,isWeekend:c.includes(m)}]),[]),u=[...d.slice(s.firstWeekday),...d.slice(0,s.firstWeekday)];s.context.mainElement.querySelectorAll('[data-vc="week"]').forEach((c=>{const d=document.createElement("button");d.type="button",u.forEach((u=>{const m=d.cloneNode(!0);m.innerText=u.titleShort,m.className=s.styles.weekDay,m.role="columnheader",m.ariaLabel=u.titleLong,m.dataset.vcWeekDay=String(u.id),u.isWeekend&&(m.dataset.vcWeekDayOff=""),c.appendChild(m)}))}))},createYearEl=(s,c,d,u,m)=>{const v=c.cloneNode(!1);return v.className=s.styles.yearsYear,v.innerText=String(m),v.ariaLabel=String(m),v.role="gridcell",v.dataset.vcYearsYear=`${m}`,u&&(v.ariaDisabled="true"),u&&(v.tabIndex=-1),v.disabled=u,setYearModifier(s,v,"year",d===m,!1),v},createYears=(s,c)=>{var d;const u=(null==c?void 0:c.dataset.vcYear)?Number(c.dataset.vcYear):s.context.selectedYear;setContext(s,"currentType","year"),createLayouts(s,c),visibilityTitle(s),visibilityArrows(s);const m=s.context.mainElement.querySelector('[data-vc="years"]');if(!s.selectionYearsMode||!m)return;const v="multiple"!==s.type||s.context.selectedYear===u?0:1,h=document.createElement("button");h.type="button";for(let c=s.context.displayYear-7;c<s.context.displayYear+8;c++){const d=c<getDate(s.context.dateMin).getFullYear()+v||c>getDate(s.context.dateMax).getFullYear(),p=createYearEl(s,h,u,d,c);m.appendChild(p),s.onCreateYearEls&&s.onCreateYearEls(s,p)}null==(d=s.context.mainElement.querySelector("[data-vc-years-year]"))||d.focus()},trackChangesHTMLElement=(s,c,d)=>{new MutationObserver((s=>{for(let u=0;u<s.length;u++)if(s[u].attributeName===c){d();break}})).observe(s,{attributes:!0})},y={value:!1,set:()=>y.value=!0,check:()=>y.value},setTheme=(s,c)=>s.dataset.vcTheme=c,trackChangesThemeInSystemSettings=(s,c)=>{if(setTheme(s.context.mainElement,c.matches?"dark":"light"),"system"!==s.selectedTheme||y.check())return;const a=s=>{const c=document.querySelectorAll('[data-vc="calendar"]');null==c||c.forEach((c=>setTheme(c,s.matches?"dark":"light")))};c.addEventListener?c.addEventListener("change",a):c.addListener(a),y.set()},detectTheme=(s,c)=>{const d=s.themeAttrDetect.length?document.querySelector(s.themeAttrDetect):null,u=s.themeAttrDetect.replace(/^.*\[(.+)\]/g,((s,c)=>c));if(!d||"system"===d.getAttribute(u))return void trackChangesThemeInSystemSettings(s,c);const m=d.getAttribute(u);m?(setTheme(s.context.mainElement,m),trackChangesHTMLElement(d,u,(()=>{const c=d.getAttribute(u);c&&setTheme(s.context.mainElement,c)}))):trackChangesThemeInSystemSettings(s,c)},handleTheme=s=>{"not all"!==window.matchMedia("(prefers-color-scheme)").media?"system"===s.selectedTheme?detectTheme(s,window.matchMedia("(prefers-color-scheme: dark)")):setTheme(s.context.mainElement,s.selectedTheme):setTheme(s.context.mainElement,"light")},capitalizeFirstLetter=s=>s.charAt(0).toUpperCase()+s.slice(1).replace(/\./,""),getLocaleWeekday=(s,c,d)=>{const u=new Date(`1978-01-0${c+1}T00:00:00.000Z`),m=u.toLocaleString(d,{weekday:"short",timeZone:"UTC"}),v=u.toLocaleString(d,{weekday:"long",timeZone:"UTC"});s.context.locale.weekdays.short.push(capitalizeFirstLetter(m)),s.context.locale.weekdays.long.push(capitalizeFirstLetter(v))},getLocaleMonth=(s,c,d)=>{const u=new Date(`1978-${String(c+1).padStart(2,"0")}-01T00:00:00.000Z`),m=u.toLocaleString(d,{month:"short",timeZone:"UTC"}),v=u.toLocaleString(d,{month:"long",timeZone:"UTC"});s.context.locale.months.short.push(capitalizeFirstLetter(m)),s.context.locale.months.long.push(capitalizeFirstLetter(v))},getLocale=s=>{var c,d,u,m,v,p,y,g;if(!(s.context.locale.weekdays.short[6]&&s.context.locale.weekdays.long[6]&&s.context.locale.months.short[11]&&s.context.locale.months.long[11]))if("string"==typeof s.locale){if("string"==typeof s.locale&&!s.locale.length)throw new Error(h.notLocale);Array.from({length:7},((c,d)=>getLocaleWeekday(s,d,s.locale))),Array.from({length:12},((c,d)=>getLocaleMonth(s,d,s.locale)))}else{if(!((null==(d=null==(c=s.locale)?void 0:c.weekdays)?void 0:d.short[6])&&(null==(m=null==(u=s.locale)?void 0:u.weekdays)?void 0:m.long[6])&&(null==(p=null==(v=s.locale)?void 0:v.months)?void 0:p.short[11])&&(null==(g=null==(y=s.locale)?void 0:y.months)?void 0:g.long[11])))throw new Error(h.notLocale);setContext(s,"locale",__spreadValues({},s.locale))}},create=s=>{const c={default:()=>{createWeek(s),createDates(s)},multiple:()=>{createWeek(s),createDates(s)},month:()=>createMonths(s),year:()=>createYears(s)};handleTheme(s),getLocale(s),createLayouts(s),visibilityTitle(s),visibilityArrows(s),createTime(s),c[s.context.currentType]()},handleArrowKeys=s=>{const t=()=>Array.from(s.context.mainElement.querySelectorAll('[data-vc="calendar"] button'));let c=0;const d={ArrowUp:(s,c)=>Math.max(0,s-c),ArrowDown:(s,c)=>Math.min(t().length-1,s+c),ArrowLeft:s=>Math.max(0,s-1),ArrowRight:s=>Math.min(t().length-1,s+1)},l=s=>{var u,m;if(!d[s.key]||"button"!==(null==(u=s.target)?void 0:u.localName))return;const v=t(),h=v[c].hasAttribute("data-vc-date-btn")?7:v[c].hasAttribute("data-vc-months-month")?4:v[c].hasAttribute("data-vc-years-year")?5:1;c=d[s.key](c,h),null==(m=v[c])||m.focus()};return s.context.mainElement.addEventListener("keydown",l),()=>{s.context.mainElement.removeEventListener("keydown",l)}},handleMonth=(s,c)=>{const d=getDate(getDateString(new Date(s.context.selectedYear,s.context.selectedMonth,1)));({prev:()=>d.setMonth(d.getMonth()-s.monthsToSwitch),next:()=>d.setMonth(d.getMonth()+s.monthsToSwitch)})[c](),setContext(s,"selectedMonth",d.getMonth()),setContext(s,"selectedYear",d.getFullYear()),visibilityTitle(s),visibilityArrows(s),createDates(s)},handleClickArrow=(s,c)=>{const d=c.target.closest("[data-vc-arrow]");if(d){if(["default","multiple"].includes(s.context.currentType))handleMonth(s,d.dataset.vcArrow);else if("year"===s.context.currentType&&void 0!==s.context.displayYear){const u={prev:-15,next:15}[d.dataset.vcArrow];setContext(s,"displayYear",s.context.displayYear+u),createYears(s,c.target)}s.onClickArrow&&s.onClickArrow(s,c)}},canToggleSelection=s=>void 0===s.enableDateToggle||("function"==typeof s.enableDateToggle?s.enableDateToggle(s):s.enableDateToggle),handleSelectDate=(s,c,d)=>{const u=c.dataset.vcDate,m=c.closest("[data-vc-date][data-vc-date-selected]"),v=canToggleSelection(s);if(m&&!v)return;const h=m?s.context.selectedDates.filter((s=>s!==u)):d?[...s.context.selectedDates,u]:[u];setContext(s,"selectedDates",h)},createDateRangeTooltip=(s,c,d)=>{if(!c)return;if(!d)return c.dataset.vcDateRangeTooltip="hidden",void(c.textContent="");const u=s.context.mainElement.getBoundingClientRect(),m=d.getBoundingClientRect();c.style.left=m.left-u.left+m.width/2+"px",c.style.top=m.bottom-u.top-m.height+"px",c.dataset.vcDateRangeTooltip="visible",c.innerHTML=s.sanitizerHTML(s.onCreateDateRangeTooltip(s,d,c,m,u))},g={self:null,lastDateEl:null,isHovering:!1,rangeMin:void 0,rangeMax:void 0,tooltipEl:null,timeoutId:null},addHoverEffect=(s,c,d)=>{var u,m,v;if(!(null==(m=null==(u=g.self)?void 0:u.context)?void 0:m.selectedDates[0]))return;const h=getDateString(s);(null==(v=g.self.context.disableDates)?void 0:v.includes(h))||(g.self.context.mainElement.querySelectorAll(`[data-vc-date="${h}"]`).forEach((s=>s.dataset.vcDateHover="")),c&&(c.dataset.vcDateHoverFirst=""),d&&(d.dataset.vcDateHoverLast=""))},removeHoverEffect=()=>{var s,c;(null==(c=null==(s=g.self)?void 0:s.context)?void 0:c.mainElement)&&g.self.context.mainElement.querySelectorAll("[data-vc-date-hover], [data-vc-date-hover-first], [data-vc-date-hover-last]").forEach((s=>{s.removeAttribute("data-vc-date-hover"),s.removeAttribute("data-vc-date-hover-first"),s.removeAttribute("data-vc-date-hover-last")}))},handleHoverDatesEvent=s=>{var c,d;if(!s.target||!(null==(d=null==(c=g.self)?void 0:c.context)?void 0:d.selectedDates[0]))return;if(!s.target.closest('[data-vc="dates"]'))return g.lastDateEl=null,createDateRangeTooltip(g.self,g.tooltipEl,null),void removeHoverEffect();const u=s.target.closest("[data-vc-date]");if(!u||g.lastDateEl===u)return;g.lastDateEl=u,createDateRangeTooltip(g.self,g.tooltipEl,u),removeHoverEffect();const m=u.dataset.vcDate,v=getDate(g.self.context.selectedDates[0]),h=getDate(m),p=g.self.context.mainElement.querySelector(`[data-vc-date="${g.self.context.selectedDates[0]}"]`),y=g.self.context.mainElement.querySelector(`[data-vc-date="${m}"]`),[x,b]=v<h?[p,y]:[y,p],[M,f]=v<h?[v,h]:[h,v];for(let s=new Date(M);s<=f;s.setDate(s.getDate()+1))addHoverEffect(s,x,b)},handleHoverSelectedDatesRangeEvent=s=>{const c=s.target.closest("[data-vc-date-selected]");if(!c&&g.lastDateEl)return g.lastDateEl=null,void createDateRangeTooltip(g.self,g.tooltipEl,null);c&&g.lastDateEl!==c&&(g.lastDateEl=c,createDateRangeTooltip(g.self,g.tooltipEl,c))},optimizedHoverHandler=s=>c=>{g.isHovering||(g.isHovering=!0,requestAnimationFrame((()=>{s(c),g.isHovering=!1})))},x=optimizedHoverHandler(handleHoverDatesEvent),b=optimizedHoverHandler(handleHoverSelectedDatesRangeEvent),handleCancelSelectionDates=s=>{g.self&&"Escape"===s.key&&(g.lastDateEl=null,setContext(g.self,"selectedDates",[]),g.self.context.mainElement.removeEventListener("mousemove",x),g.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),createDateRangeTooltip(g.self,g.tooltipEl,null),removeHoverEffect())},handleMouseLeave=()=>{null!==g.timeoutId&&clearTimeout(g.timeoutId),g.timeoutId=setTimeout((()=>{g.lastDateEl=null,createDateRangeTooltip(g.self,g.tooltipEl,null),removeHoverEffect()}),50)},updateDisabledDates=()=>{var s,c,d,u;if(!(null==(d=null==(c=null==(s=g.self)?void 0:s.context)?void 0:c.selectedDates)?void 0:d[0])||!(null==(u=g.self.context.disableDates)?void 0:u[0]))return;const m=getDate(g.self.context.selectedDates[0]),[v,h]=g.self.context.disableDates.map((s=>getDate(s))).reduce((([s,c],d)=>[m>=d?d:s,m<d&&null===c?d:c]),[null,null]);v&&setContext(g.self,"displayDateMin",getDateString(new Date(v.setDate(v.getDate()+1)))),h&&setContext(g.self,"displayDateMax",getDateString(new Date(h.setDate(h.getDate()-1))));g.self.disableDatesPast&&!g.self.disableAllDates&&getDate(g.self.context.displayDateMin)<getDate(g.self.context.dateToday)&&setContext(g.self,"displayDateMin",g.self.context.dateToday)},handleSelectDateRange=(s,c)=>{g.self=s,g.lastDateEl=c,removeHoverEffect(),s.disableDatesGaps&&(g.rangeMin=g.rangeMin?g.rangeMin:s.context.displayDateMin,g.rangeMax=g.rangeMax?g.rangeMax:s.context.displayDateMax),s.onCreateDateRangeTooltip&&(g.tooltipEl=s.context.mainElement.querySelector("[data-vc-date-range-tooltip]"));const d=null==c?void 0:c.dataset.vcDate;if(d){const c=1===s.context.selectedDates.length&&s.context.selectedDates[0].includes(d),u=c&&!canToggleSelection(s)?[d,d]:c&&canToggleSelection(s)?[]:s.context.selectedDates.length>1?[d]:[...s.context.selectedDates,d];setContext(s,"selectedDates",u),s.context.selectedDates.length>1&&s.context.selectedDates.sort(((s,c)=>+new Date(s)-+new Date(c)))}({set:()=>(s.disableDatesGaps&&updateDisabledDates(),createDateRangeTooltip(g.self,g.tooltipEl,c),g.self.context.mainElement.removeEventListener("mousemove",b),g.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),g.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),g.self.context.mainElement.addEventListener("mousemove",x),g.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),g.self.context.mainElement.addEventListener("keydown",handleCancelSelectionDates),()=>{g.self.context.mainElement.removeEventListener("mousemove",x),g.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),g.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates)}),reset:()=>{const[d,u]=[s.context.selectedDates[0],s.context.selectedDates[s.context.selectedDates.length-1]],m=s.context.selectedDates[0]!==s.context.selectedDates[s.context.selectedDates.length-1],v=parseDates([`${d}:${u}`]).filter((c=>!s.context.disableDates.includes(c))),h=m?s.enableEdgeDatesOnly?[d,u]:v:[s.context.selectedDates[0],s.context.selectedDates[0]];if(setContext(s,"selectedDates",h),s.disableDatesGaps&&(setContext(s,"displayDateMin",g.rangeMin),setContext(s,"displayDateMax",g.rangeMax)),g.self.context.mainElement.removeEventListener("mousemove",x),g.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),g.self.context.mainElement.removeEventListener("keydown",handleCancelSelectionDates),s.onCreateDateRangeTooltip)return s.context.selectedDates[0]||(g.self.context.mainElement.removeEventListener("mousemove",b),g.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(g.self,g.tooltipEl,null)),s.context.selectedDates[0]&&(g.self.context.mainElement.addEventListener("mousemove",b),g.self.context.mainElement.addEventListener("mouseleave",handleMouseLeave),createDateRangeTooltip(g.self,g.tooltipEl,c)),()=>{g.self.context.mainElement.removeEventListener("mousemove",b),g.self.context.mainElement.removeEventListener("mouseleave",handleMouseLeave)}}})[1===s.context.selectedDates.length?"set":"reset"]()},updateDateModifier=s=>{s.context.mainElement.querySelectorAll("[data-vc-date]").forEach((c=>{const d=c.querySelector("[data-vc-date-btn]"),u=c.dataset.vcDate,m=getDate(u).getDay();setDateModifier(s,s.context.selectedYear,c,d,m,u,"current")}))},handleClickDate=(s,c)=>{var d;const u=c.target,m=u.closest("[data-vc-date-btn]");if(!s.selectionDatesMode||!["single","multiple","multiple-ranged"].includes(s.selectionDatesMode)||!m)return;const v=m.closest("[data-vc-date]");({single:()=>handleSelectDate(s,v,!1),multiple:()=>handleSelectDate(s,v,!0),"multiple-ranged":()=>handleSelectDateRange(s,v)})[s.selectionDatesMode](),null==(d=s.context.selectedDates)||d.sort(((s,c)=>+new Date(s)-+new Date(c))),s.onClickDate&&s.onClickDate(s,c),s.inputMode&&s.context.inputElement&&s.context.mainElement&&s.onChangeToInput&&s.onChangeToInput(s,c);const h=u.closest('[data-vc-date-month="prev"]'),p=u.closest('[data-vc-date-month="next"]');({prev:()=>s.enableMonthChangeOnDayClick?handleMonth(s,"prev"):updateDateModifier(s),next:()=>s.enableMonthChangeOnDayClick?handleMonth(s,"next"):updateDateModifier(s),current:()=>updateDateModifier(s)})[h?"prev":p?"next":"current"]()},M=["month","year"],getColumnID=(s,c,d)=>{const u=s.context.mainElement.querySelectorAll('[data-vc="column"]'),m=Array.from(u).findIndex((s=>s.closest(`[data-vc-column="${c}"]`))),v=Number(u[m].querySelector(`[data-vc="${c}"]`).getAttribute(`data-vc-${c}`));return"month"===s.context.currentType&&m>=0?d-m:"year"===s.context.currentType&&s.context.selectedYear!==v?d-1:d},handleMultipleYearSelection=(s,c)=>{const d=getColumnID(s,"year",Number(c.dataset.vcYearsYear)),u=getDate(s.context.dateMin),m=getDate(s.context.dateMax),v=s.context.selectedMonth<u.getMonth()&&d<=u.getFullYear(),h=s.context.selectedMonth>m.getMonth()&&d>=m.getFullYear(),p=d<u.getFullYear(),y=d>m.getFullYear();setContext(s,"selectedYear",v||p?u.getFullYear():h||y?m.getFullYear():d),setContext(s,"selectedMonth",v||p?u.getMonth():h||y?m.getMonth():s.context.selectedMonth)},handleMultipleMonthSelection=(s,c)=>{const d=c.closest('[data-vc-column="month"]').querySelector('[data-vc="year"]'),u=getColumnID(s,"month",Number(c.dataset.vcMonthsMonth)),m=Number(d.dataset.vcYear),v=getDate(s.context.dateMin),h=getDate(s.context.dateMax),p=u<v.getMonth()&&m<=v.getFullYear(),y=u>h.getMonth()&&m>=h.getFullYear();setContext(s,"selectedYear",m),setContext(s,"selectedMonth",p?v.getMonth():y?h.getMonth():u)},handleItemClick=(s,c,d,u)=>{var m;({year:()=>{if("multiple"===s.type)return handleMultipleYearSelection(s,u);setContext(s,"selectedYear",Number(u.dataset.vcYearsYear))},month:()=>{if("multiple"===s.type)return handleMultipleMonthSelection(s,u);setContext(s,"selectedMonth",Number(u.dataset.vcMonthsMonth))}})[d]();({year:()=>{var d;return null==(d=s.onClickYear)?void 0:d.call(s,s,c)},month:()=>{var d;return null==(d=s.onClickMonth)?void 0:d.call(s,s,c)}})[d](),s.context.currentType!==s.type?(setContext(s,"currentType",s.type),create(s),null==(m=s.context.mainElement.querySelector(`[data-vc="${d}"]`))||m.focus()):setYearModifier(s,u,d,!0,!0)},handleClickType=(s,c,d)=>{var u;const m=c.target,v=m.closest(`[data-vc="${d}"]`),h={year:()=>createYears(s,m),month:()=>createMonths(s,m)};if(v&&s.onClickTitle&&s.onClickTitle(s,c),v&&s.context.currentType!==d)return h[d]();const p=m.closest(`[data-vc-${d}s-${d}]`);if(p)return handleItemClick(s,c,d,p);const y=m.closest('[data-vc="grid"]'),g=m.closest('[data-vc="column"]');(s.context.currentType===d&&v||"multiple"===s.type&&s.context.currentType===d&&y&&!g)&&(setContext(s,"currentType",s.type),create(s),null==(u=s.context.mainElement.querySelector(`[data-vc="${d}"]`))||u.focus())},handleClickMonthOrYear=(s,c)=>{const d={month:s.selectionMonthsMode,year:s.selectionYearsMode};M.forEach((u=>{d[u]&&c.target&&handleClickType(s,c,u)}))},handleClickWeekNumber=(s,c)=>{if(!s.enableWeekNumbers||!s.onClickWeekNumber)return;const d=c.target.closest("[data-vc-week-number]"),u=s.context.mainElement.querySelectorAll("[data-vc-date-week-number]");if(!d||!u[0])return;const m=Number(d.innerText),v=Number(d.dataset.vcWeekYear),h=Array.from(u).filter((s=>Number(s.dataset.vcDateWeekNumber)===m));s.onClickWeekNumber(s,m,v,h,c)},handleClickWeekDay=(s,c)=>{if(!s.onClickWeekDay)return;const d=c.target.closest("[data-vc-week-day]"),u=c.target.closest('[data-vc="column"]'),m=u?u.querySelectorAll("[data-vc-date-week-day]"):s.context.mainElement.querySelectorAll("[data-vc-date-week-day]");if(!d||!m[0])return;const v=Number(d.dataset.vcWeekDay),h=Array.from(m).filter((s=>Number(s.dataset.vcDateWeekDay)===v));s.onClickWeekDay(s,v,h,c)},handleClick=s=>{const t=c=>{handleClickArrow(s,c),handleClickWeekDay(s,c),handleClickWeekNumber(s,c),handleClickDate(s,c),handleClickMonthOrYear(s,c)};return s.context.mainElement.addEventListener("click",t),()=>s.context.mainElement.removeEventListener("click",t)},initMonthsCount=s=>{if("multiple"===s.type&&(s.displayMonthsCount<=1||s.displayMonthsCount>12))throw new Error(h.incorrectMonthsCount);if("multiple"!==s.type&&s.displayMonthsCount>1)throw new Error(h.incorrectMonthsCount);setContext(s,"displayMonthsCount",s.displayMonthsCount?s.displayMonthsCount:"multiple"===s.type?2:1)},getLocalDate=()=>{const s=new Date;return new Date(s.getTime()-6e4*s.getTimezoneOffset()).toISOString().substring(0,10)},resolveDate=(s,c)=>"today"===s?getLocalDate():s instanceof Date||"number"==typeof s||"string"==typeof s?parseDates([s])[0]:c,initRange=s=>{var c,d,u;const m=resolveDate(s.dateMin,s.dateMin),v=resolveDate(s.dateMax,s.dateMax),h=resolveDate(s.displayDateMin,m),p=resolveDate(s.displayDateMax,v);setContext(s,"dateToday",resolveDate(s.dateToday,s.dateToday)),setContext(s,"displayDateMin",h?getDate(m)>=getDate(h)?m:h:m),setContext(s,"displayDateMax",p?getDate(v)<=getDate(p)?v:p:v);const y=s.disableDatesPast&&!s.disableAllDates&&getDate(h)<getDate(s.context.dateToday);setContext(s,"displayDateMin",y||s.disableAllDates?s.context.dateToday:h),setContext(s,"displayDateMax",s.disableAllDates?s.context.dateToday:p),setContext(s,"disableDates",s.disableDates[0]&&!s.disableAllDates?parseDates(s.disableDates):s.disableAllDates?[s.context.displayDateMin]:[]),s.context.disableDates.length>1&&s.context.disableDates.sort(((s,c)=>+new Date(s)-+new Date(c))),setContext(s,"enableDates",s.enableDates[0]?parseDates(s.enableDates):[]),(null==(c=s.context.enableDates)?void 0:c[0])&&(null==(d=s.context.disableDates)?void 0:d[0])&&setContext(s,"disableDates",s.context.disableDates.filter((c=>!s.context.enableDates.includes(c)))),s.context.enableDates.length>1&&s.context.enableDates.sort(((s,c)=>+new Date(s)-+new Date(c))),(null==(u=s.context.enableDates)?void 0:u[0])&&s.disableAllDates&&(setContext(s,"displayDateMin",s.context.enableDates[0]),setContext(s,"displayDateMax",s.context.enableDates[s.context.enableDates.length-1])),setContext(s,"dateMin",s.displayDisabledDates?m:s.context.displayDateMin),setContext(s,"dateMax",s.displayDisabledDates?v:s.context.displayDateMax)},initSelectedDates=s=>{var c;setContext(s,"selectedDates",(null==(c=s.selectedDates)?void 0:c[0])?parseDates(s.selectedDates):[])},initSelectedMonthYear=s=>{var c;if(s.enableJumpToSelectedDate&&(null==(c=s.selectedDates)?void 0:c[0])&&void 0===s.selectedMonth&&void 0===s.selectedYear){const c=getDate(parseDates(s.selectedDates)[0]);return setContext(s,"selectedMonth",c.getMonth()),void setContext(s,"selectedYear",c.getFullYear())}const d=void 0!==s.selectedMonth&&Number(s.selectedMonth)>=0&&Number(s.selectedMonth)<12,u=void 0!==s.selectedYear&&Number(s.selectedYear)>=0&&Number(s.selectedYear)<=9999;setContext(s,"selectedMonth",d?Number(s.selectedMonth):getDate(s.context.dateToday).getMonth()),setContext(s,"selectedYear",u?Number(s.selectedYear):getDate(s.context.dateToday).getFullYear()),setContext(s,"displayYear",s.context.selectedYear)},initTime=s=>{var c,d,u;if(!s.selectionTimeMode)return;if(![12,24].includes(s.selectionTimeMode))throw new Error(h.incorrectTime);const m=12===s.selectionTimeMode,v=m?/^(0[1-9]|1[0-2]):([0-5][0-9]) ?(AM|PM)?$/i:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/;let[p,y,g]=null!=(u=null==(d=null==(c=s.selectedTime)?void 0:c.match(v))?void 0:d.slice(1))?u:[];p?m&&!g&&(g="AM"):(p=m?transformTime12(String(s.timeMinHour)):String(s.timeMinHour),y=String(s.timeMinMinute),g=m?Number(transformTime12(String(s.timeMinHour)))>=12?"PM":"AM":null),setContext(s,"selectedHours",p.padStart(2,"0")),setContext(s,"selectedMinutes",y.padStart(2,"0")),setContext(s,"selectedKeeping",g),setContext(s,"selectedTime",`${s.context.selectedHours}:${s.context.selectedMinutes}${g?` ${g}`:""}`)},initAllVariables=s=>{setContext(s,"currentType",s.type),initMonthsCount(s),initRange(s),initSelectedMonthYear(s),initSelectedDates(s),initTime(s)},reset=(s,{year:c,month:d,dates:u,time:m,locale:v})=>{var h;const p={year:s.selectedYear,month:s.selectedMonth,dates:s.selectedDates,time:s.selectedTime};(s.selectedYear=c?p.year:s.context.selectedYear,s.selectedMonth=d?p.month:s.context.selectedMonth,s.selectedTime=m?p.time:s.context.selectedTime,s.selectedDates="only-first"===u&&(null==(h=s.context.selectedDates)?void 0:h[0])?[s.context.selectedDates[0]]:!0===u?p.dates:s.context.selectedDates,v)&&setContext(s,"locale",{months:{short:[],long:[]},weekdays:{short:[],long:[]}});initAllVariables(s),create(s),s.selectedYear=p.year,s.selectedMonth=p.month,s.selectedDates=p.dates,s.selectedTime=p.time,"multiple-ranged"===s.selectionDatesMode&&u&&handleSelectDateRange(s,null)};function findBestPickerPosition(s,c){const d="left";if(!c||!s)return d;const{canShow:u,parentPositions:m}=getAvailablePosition(s,c),v=u.left&&u.right;return(v&&u.bottom?"center":v&&u.top?["top","center"]:Array.isArray(m)?["bottom"===m[0]?"top":"bottom",...m.slice(1)]:m)||d}const setPosition=(s,c,d)=>{if(!s)return;const u="auto"===d?findBestPickerPosition(s,c):d,m={top:-c.offsetHeight,bottom:s.offsetHeight,left:0,center:s.offsetWidth/2-c.offsetWidth/2,right:s.offsetWidth-c.offsetWidth},v=Array.isArray(u)?u[0]:"bottom",h=Array.isArray(u)?u[1]:u;c.dataset.vcPosition=v;const{top:p,left:y}=getOffset(s),g=p+m[v];let x=y+m[h];const{vw:b}=getViewportDimensions();if(x+c.clientWidth>b){const s=window.innerWidth-document.body.clientWidth;x=b-c.clientWidth-s}else x<0&&(x=0);Object.assign(c.style,{left:`${x}px`,top:`${g}px`})},createToInput=(s,c=!0)=>{const d=document.createElement("div");return d.className=s.styles.calendar,d.dataset.vc="calendar",d.dataset.vcInput="",d.dataset.vcCalendarHidden="",d.style.visibility="hidden",setContext(s,"inputModeInit",!0),setContext(s,"mainElement",d),document.body.appendChild(s.context.mainElement),c&&queueMicrotask((()=>{setPosition(s.context.inputElement,d,s.positionToInput),s.context.mainElement.style.visibility="visible",s.show()})),reset(s,{year:!0,month:!0,dates:!0,time:!0,locale:!0}),s.onInit&&s.onInit(s),handleArrowKeys(s),handleClick(s)},handleInput=s=>{const c=[];setContext(s,"inputElement",s.context.mainElement);const a=()=>setPosition(s.context.inputElement,s.context.mainElement,s.positionToInput),n=c=>{var d,u;"Escape"===c.key&&((null==(d=null==s?void 0:s.context)?void 0:d.inputElement)&&(null==(u=null==s?void 0:s.context)?void 0:u.mainElement)&&s.hide(),document.removeEventListener("keydown",n))},l=c=>{s&&c.target!==s.context.inputElement&&!s.context.mainElement.contains(c.target)&&(s.context.inputElement&&s.context.mainElement&&s.hide(),window.removeEventListener("resize",a),document.removeEventListener("click",l,{capture:!0}))},o=()=>{s.context.inputModeInit?(setPosition(s.context.inputElement,s.context.mainElement,s.positionToInput),s.context.mainElement.style.visibility="visible",s.show()):c.push(createToInput(s)),window.addEventListener("resize",a),document.addEventListener("click",l,{capture:!0}),document.addEventListener("keydown",n)};return s.context.inputElement.addEventListener("click",o),s.context.inputElement.addEventListener("focus",o),()=>{c.forEach((s=>s()))}},init=s=>(setContext(s,"originalElement",s.context.mainElement.cloneNode(!0)),setContext(s,"isInit",!0),s.inputMode?handleInput(s):(initAllVariables(s),create(s),s.onInit&&s.onInit(s),handleArrowKeys(s),handleClick(s))),replaceProperties=(s,c)=>{const d=Object.keys(c);for(let u=0;u<d.length;u++){const m=d[u];"object"!=typeof s[m]||"object"!=typeof c[m]||c[m]instanceof Date||Array.isArray(c[m])?void 0!==c[m]&&(s[m]=c[m]):replaceProperties(s[m],c[m])}},set=(s,c,d)=>{replaceProperties(s,c),reset(s,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),d))},show=s=>{s.context.currentType?(s.context.mainElement.removeAttribute("data-vc-calendar-hidden"),s.onShow&&s.onShow(s)):s.context.mainElement.click()},update=(s,c)=>{if(!s.context.isInit)throw new Error(h.notInit);s.inputMode&&!s.context.inputModeInit&&createToInput(s,!1);reset(s,__spreadValues(__spreadValues({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),c)),s.onUpdate&&s.onUpdate(s)},f={application:"Calendar",navigation:"Calendar Navigation",arrowNext:{month:"Next month",year:"Next list of years"},arrowPrev:{month:"Previous month",year:"Previous list of years"},month:"Select month, current selected month:",months:"List of months",year:"Select year, current selected year:",years:"List of years",week:"Days of the week",weekNumber:"Numbers of weeks in a year",dates:"Dates in the current month",selectingTime:"Selecting a time ",inputHour:"Hours",inputMinute:"Minutes",rangeHour:"Slider for selecting hours",rangeMinute:"Slider for selecting minutes",btnKeeping:"Switch AM/PM, current position:"},D={calendar:"vc",controls:"vc-controls",grid:"vc-grid",column:"vc-column",header:"vc-header",headerContent:"vc-header__content",month:"vc-month",year:"vc-year",arrowPrev:"vc-arrow vc-arrow_prev",arrowNext:"vc-arrow vc-arrow_next",wrapper:"vc-wrapper",content:"vc-content",months:"vc-months",monthsMonth:"vc-months__month",years:"vc-years",yearsYear:"vc-years__year",week:"vc-week",weekDay:"vc-week__day",weekNumbers:"vc-week-numbers",weekNumbersTitle:"vc-week-numbers__title",weekNumbersContent:"vc-week-numbers__content",weekNumber:"vc-week-number",dates:"vc-dates",date:"vc-date",dateBtn:"vc-date__btn",datePopup:"vc-date__popup",dateRangeTooltip:"vc-date-range-tooltip",time:"vc-time",timeContent:"vc-time__content",timeHour:"vc-time__hour",timeMinute:"vc-time__minute",timeKeeping:"vc-time__keeping",timeRanges:"vc-time__ranges",timeRange:"vc-time__range"};class OptionsCalendar{constructor(){__publicField(this,"type","default"),__publicField(this,"inputMode",!1),__publicField(this,"positionToInput","left"),__publicField(this,"firstWeekday",1),__publicField(this,"monthsToSwitch",1),__publicField(this,"themeAttrDetect","html[data-theme]"),__publicField(this,"locale","en"),__publicField(this,"dateToday","today"),__publicField(this,"dateMin","1970-01-01"),__publicField(this,"dateMax","2470-12-31"),__publicField(this,"displayDateMin"),__publicField(this,"displayDateMax"),__publicField(this,"displayDatesOutside",!0),__publicField(this,"displayDisabledDates",!1),__publicField(this,"displayMonthsCount"),__publicField(this,"disableDates",[]),__publicField(this,"disableAllDates",!1),__publicField(this,"disableDatesPast",!1),__publicField(this,"disableDatesGaps",!1),__publicField(this,"disableWeekdays",[]),__publicField(this,"disableToday",!1),__publicField(this,"enableDates",[]),__publicField(this,"enableEdgeDatesOnly",!0),__publicField(this,"enableDateToggle",!0),__publicField(this,"enableWeekNumbers",!1),__publicField(this,"enableMonthChangeOnDayClick",!0),__publicField(this,"enableJumpToSelectedDate",!1),__publicField(this,"selectionDatesMode","single"),__publicField(this,"selectionMonthsMode",!0),__publicField(this,"selectionYearsMode",!0),__publicField(this,"selectionTimeMode",!1),__publicField(this,"selectedDates",[]),__publicField(this,"selectedMonth"),__publicField(this,"selectedYear"),__publicField(this,"selectedHolidays",[]),__publicField(this,"selectedWeekends",[0,6]),__publicField(this,"selectedTime"),__publicField(this,"selectedTheme","system"),__publicField(this,"timeMinHour",0),__publicField(this,"timeMaxHour",23),__publicField(this,"timeMinMinute",0),__publicField(this,"timeMaxMinute",59),__publicField(this,"timeControls","all"),__publicField(this,"timeStepHour",1),__publicField(this,"timeStepMinute",1),__publicField(this,"sanitizerHTML",(s=>s)),__publicField(this,"onClickDate"),__publicField(this,"onClickWeekDay"),__publicField(this,"onClickWeekNumber"),__publicField(this,"onClickTitle"),__publicField(this,"onClickMonth"),__publicField(this,"onClickYear"),__publicField(this,"onClickArrow"),__publicField(this,"onChangeTime"),__publicField(this,"onChangeToInput"),__publicField(this,"onCreateDateRangeTooltip"),__publicField(this,"onCreateDateEls"),__publicField(this,"onCreateMonthEls"),__publicField(this,"onCreateYearEls"),__publicField(this,"onInit"),__publicField(this,"onUpdate"),__publicField(this,"onDestroy"),__publicField(this,"onShow"),__publicField(this,"onHide"),__publicField(this,"popups",{}),__publicField(this,"labels",__spreadValues({},f)),__publicField(this,"layouts",{default:"",multiple:"",month:"",year:""}),__publicField(this,"styles",__spreadValues({},D))}}const E=class e extends OptionsCalendar{constructor(s,c){var d;super(),__publicField(this,"init",(()=>init(this))),__publicField(this,"update",(s=>update(this,s))),__publicField(this,"destroy",(()=>destroy(this))),__publicField(this,"show",(()=>show(this))),__publicField(this,"hide",(()=>hide(this))),__publicField(this,"set",((s,c)=>set(this,s,c))),__publicField(this,"context"),this.context=__spreadProps(__spreadValues({},this.context),{locale:{months:{short:[],long:[]},weekdays:{short:[],long:[]}}}),setContext(this,"mainElement","string"==typeof s?null!=(d=e.memoizedElements.get(s))?d:this.queryAndMemoize(s):s),c&&replaceProperties(this,c)}queryAndMemoize(s){const c=document.querySelector(s);if(!c)throw new Error(h.notFoundSelector(s));return e.memoizedElements.set(s,c),c}};__publicField(E,"memoizedElements",new Map);let w=E;export{w as Calendar};

