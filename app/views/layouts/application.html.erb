<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || t('website_title') %></title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
    <%= javascript_pack_tag "sidebar" %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application.tailwind", "inter-font", "data-turbo-track": "reload" %>
  </head>

  <body>
    <div class="absolute top-5 left-5 text-3xl cursor-pointer" id="burger">&#9776;</div>

    <!-- Оверлей, затемняет остальной контент -->
    <div class="fixed inset-0 bg-gray-800 bg-opacity-40 z-40 hidden" id="overlay"></div>

    <div class="fixed left-0 top-0 h-full w-60 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-50" id="sidebar">

      <%= image_tag('arrow_back.svg', alt: 'Back arrow', id: 'closeSidebar', class: 'max-w-10 max-h-10 mt-5 ml-5 cursor-pointer') %>
      <div class="p-4">
        <h2 class="sidebar text-xl font-bold"><%= t('website_title') %></h2>
        <ul class="mt-4">
          <li class="mt-4 text-gray-700">Username</li>
          <li class="mt-4"><a href="/" class="text-gray-700"><%= t('today') %></a></li>
          <li class="mt-4"><a href="/calendar" class="text-gray-700"><%= t('full_calendar') %></a></li>
          <li class="mt-4"><a href="/about" class="text-gray-700"><%= t('about_link') %></a></li>
        </ul>
      </div>

      <div class="absolute bottom-0">
        <p class="ml-4"><%= t('toggle_language') %></p>
        <div class="flex ml-4 mt-2 w-full space-x-4">
          <%= link_to image_tag('en_flag.svg', alt: 'English', class: 'border-2 border-black'), switch_lang_path(lang: 'en'), class: "min-w-12 min-h-12" %>
          <%= link_to image_tag('ru_flag.svg', alt: 'Русский', class: 'border-2 border-black'), switch_lang_path(lang: 'ru'), class: "min-w-12 min-h-12" %>
        </div>
      </div>

    </div>

    <%= yield %>
  </body>
</html>
